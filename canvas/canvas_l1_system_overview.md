# Canvas L1：系統功能總覽（含 AI 模組延伸層）

本設計圖概述整體 ESG 題庫互動系統的主要模組構成、資料流程，以及 AI 模組在系統中的參與位置與邏輯層。此 Canvas 為後續使用者流程（L2）、欄位對應邏輯（L3）、AI 支援任務（L4）的結構基礎。

---

## 🔧 系統核心模組架構

```
[ 題庫資料檔案（CSV, 各產業） ]
                ↓
        [ 題庫載入模組 ]
                ↓
        [ 產業選擇介面 / 問卷啟動 ]
                ↓
         ┌──────────────┐
         │   題目作答流程控制器   │
         └──────────────┘
                ↓
     ┌────────┬────────┬────────┐
     │ 教學導入 │ 初階題組 │ 進階題組 │
     └────────┴────────┴────────┘
                ↓
        [ 回答暫存與記錄模組 ]
                ↓
        [ 報告生成模組（簡版 / 完整） ]
                ↓
        [ 報告顯示 / 匯出 / 儲存 ]
```

---

## 🤖 AI 模組延伸層（功能對應）

> 此層橫向串接上層模組，提供智慧補充、語意辨識、延伸推薦、報告撰寫與標籤化功能。

```
───────────── AI 模組橫向參與層 ─────────────
             ↑             ↑              ↑
     (1) 教學說明   (2) 作答補充    (3) 回答理解
     question_note   follow_up     custom_answer
             ↑             ↑              ↑
───────────────────────────────────────────────
             ↓             ↓              ↓
      [ AI 教學解釋模組 ]     [ AI 延伸補充模組 ]     [ AI NLP 判讀模組 ]
                                          ↓
                                [ AI 報告補強模組 ]
                                          ↓
                                [ 標籤生成與知識庫同步 ]
───────────────────────────────────────────────
```

---

## 📦 各模組功能說明摘要

| 模組名稱             | 功能說明                                                   |
|----------------------|------------------------------------------------------------|
| 題庫載入模組         | 載入各產業獨立題庫，維持 CSV 結構一致，可動態擴充                    |
| 題目流程控制器       | 控制每階段題組顯示（教學、初階、進階），支援跳題、自定義選項              |
| 作答儲存模組         | 記錄作答狀況與回答內容，可日後串接資料庫或簡易 local 儲存               |
| 報告生成模組         | 根據回答與關聯欄位產出報告草稿，可分為初階簡報、進階分析報告             |
| AI 教學解釋模組       | 解析題目備註 `question_note`，用於生成使用者提示與互動說明                 |
| AI NLP 判讀模組       | 判斷自由輸入內容與選項、標籤關聯，提升彈性回應與資料標準化處理             |
| AI 延伸補充模組       | 根據 `follow_up` 進行後續引導提問，或根據 `learning_goal` 提供教學型建議     |
| AI 報告補強模組       | 根據作答紀錄自動補寫報告段落、加入 ESG 建議策略                           |
| 標籤生成與知識庫同步   | 將 `answer_tags` 串接進本地知識庫，支援後續搜尋與 RAG 知識擴充             |

---

## 📌 補充說明

- 本設計強調模組分層、資料標準化與可維護性，未來如需導入 API、前後端分離架構、或 GPT-4o 等模型，皆可從現有 Canvas 擴充。
- 所有題庫與欄位均不綁定寫死邏輯，支援後續 GUI 編輯器或外部資料串接。

---

如需視覺圖表版本，可依本結構轉換為 Mermaid、Draw.io 或 Lucidchart，適合前端或設計師做為介面配對參考依據。
