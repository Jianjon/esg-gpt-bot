# Canvas L3：資料欄位對應邏輯圖（Question Data Mapping）

本設計圖針對 ESG 題庫的欄位進行用途分類與系統中實際作用對應，幫助開發者、資料設計者與模型工程師理解：

- 每個欄位的顯示／處理／生成位置為何？
- 哪些欄位僅作為內部引導？哪些會影響使用者體驗？
- 哪些欄位與報告輸出／AI 模組互動有直接關聯？

---

## 🗂️ 題庫欄位分類對應表

| 欄位名稱                     | 類型   | 使用階段            | 顯示給使用者  | 給 AI 用 | 進報告 | 功能說明與用途                                 |
| ------------------------ | ---- | --------------- | ------- | ------ | --- | --------------------------------------- |
| `question_id`            | 系統識別 | 整體流程控制          | 否       | 否      | 否   | 系統內部題目識別碼，不顯示給使用者                       |
| `industry_type`          | 類別分類 | 題庫載入            | 否       | ✅      | ✅   | 依產業切換題庫使用，控制題庫來源                        |
| `question_text`          | 題目顯示 | 題目呈現            | ✅       | ✅      | 否   | 顯示在介面給使用者閱讀，為主問句                        |
| `topic_category`         | 分類維度 | 題目組織與報告分類       | ✅       | ✅      | ✅   | 用於將題目歸類為「排放識別 / 數據能力 / 管理制度」等面向         |
| `option_type`            | 題型設定 | 顯示控制            | 否       | ✅      | 否   | 控制題目為單選、多選、教學題等，未來前端需依據調整互動形式           |
| `difficulty_level`       | 分級設定 | 題組段落分流          | 否       | ✅      | ✅   | 控制題目屬於教學 / 初階 / 進階，對應答題流程與進度邏輯          |
| `report_section`         | 報告分類 | 報告組段            | 否       | ✅      | ✅   | 指定此題對應的報告區段，例如「排放熱點」、「治理制度」等            |
| `learning_objective`     | 教學目標 | 回饋與報告補強         | 否       | ✅      | ✅   | AI 可根據此欄位補充建議段落、教學摘要                    |
| `question_note`          | 補充說明 | 題目前導說明          | ✅ (小提示) | ✅      | ✅   | 顯示於介面說明區，並供 AI 用於補充或轉述解釋                |
| `option_A ~ E`           | 作答選項 | 顯示與選擇           | ✅       | ✅      | ✅   | 顯示於作答介面，亦供報告引用（可記錄作答內容）                 |
| `option_A_note ~ E_note` | 選項解釋 | 顯示與回饋補充         | ✅ (選填)  | ✅      | ✅   | 作為選項後說明用，提供作答回饋時呈現                      |
| `follow_up`              | 延伸設計 | 作答後推薦／引導        | ✅ (提示)  | ✅      | 可選  | 使用者作答後顯示建議延伸問題，亦可作為對話式延伸基礎              |
| `allow_custom_answer`    | 類型控制 | 顯示與輸入欄設定        | 控制欄位    | ✅      | ✅   | 若為 TRUE，則開啟自由輸入欄，並供 NLP 分析與報告補強使用       |
| `allow_skip`             | 題目流程 | 顯示控制            | 控制按鈕    | 否      | 否   | 若 TRUE，使用者可跳過此題，不影響進度，但記錄狀態             |
| `free_answer_note`       | 提示文字 | 顯示輔助            | ✅ (小提示) | ✅      | ✅   | 若允許自由輸入，則顯示引導文字，如「請說明現況」等               |
| `report_topic`           | 報告設計 | 報告摘要分類          | 否       | ✅      | ✅   | 用於報告生成時將答案歸入該主題分類段落                     |
| `learning_goal`          | 教學回饋 | 系統建議與診斷回饋       | 否       | ✅      | ✅   | 作為學習回饋生成與報告強化使用（例如：你已具備資料記錄能力）          |
| `answer_tags`            | 分類標籤 | 分類 / 標記 / 知識庫連結 | 否       | ✅      | ✅   | 可作為報告段落、資料視覺圖或知識庫的索引點，支援未來 RAG 與資料庫串接用途 |

---

## 🧠 應用邏輯補充

- 顯示給使用者的欄位建議集中設計為：主題（text）、選項（含 note）、提示與說明區塊（note / follow\_up）
- AI 模組會大量依賴：`question_note`、`follow_up`、`learning_goal`、`answer_tags`、`report_section`
- 報告生成需綜合：`選項內容` + `learning_objective` + `report_section` + `answer_tags`

---

此 Canvas 可搭配 Canvas L1 / L4 用於撰寫自動化模組邏輯、欄位前後台呈現設計，以及未來 API 格式對接規格定義。

